function redirect(){let e=localStorage.getItem("name");localStorage.getItem("username"),void 0==e?window.location="/chat/login/":(localStorage.removeItem("roomId"),localStorage.removeItem("Location"))}function redirectToCreateChatRoomPage(){window.location="/chat/createchatroom/"}function getData(){document.getElementById("output").innerHTML="";let e=localStorage.getItem("username");rooms.database().ref(`/${e}`).on("value",function(t){var a=t.val(),n=Object.entries(a),l=Object.keys(a).map(e=>[Number(e),a[e]]),s=Object.values(a);for(let d=0;d<l.length;d++)values=s[d],roomId=(getRoomId=n[d])[0],Location=(getLocation=values).location,rooms.database().ref(`/${Location}/${roomId}`).on("value",function(t){user=(getUsers=(a=t.val()).users)[`${e}`],Location=a.location,name=a.name,role=user.role;var n=`<div class=container><div class=top><input class=input id=change_name_${roomId} value=${name} style=display:none><button class="btn dark" id=save_${roomId} style=display:none onclick='save_edited_room_name("${roomId}")'>Save Changes</button><p id=${roomId}_p class=p style=display:unset>${name}</p></div><div class=middle><button class="btn success" id=open_${roomId} onclick='open_chat("${roomId}","${Location}")'>Open Chat</button><label for=admin style=display:none id=admin_label_${roomId}>Admin <input type=radio name=role id=admin_radio_${roomId} value=admin></label><label for=regular style=display:none id=regular_label_${roomId}>Regular <input type=radio name=role id=regular_radio_${roomId} value=regular></label><input type=email class=input id=add_user_input_${roomId} placeholder="Enter The Email" style=display:none><button class="btn primary" id=add_user_${roomId} onclick='add_user("${Location}","${roomId}")' style=display:none>Add User</button></div><div class=bottom><button class="btn primary" id=show_add_user_${roomId} onclick='show_add_user_settings("${roomId}")'>Add User</button><button class="btn warning" onclick='show_edit_group_name_settings("${roomId}")'>Edit Group Name</button><button class="btn danger" id=exit_${roomId} onclick='exit_room("${Location}","${roomId}","${e}")'>Exit Room</button></div></div>`,l=`<div class=container><div class=top><p id=${roomId}_p class=p style=display:unset>${name}</p></div><div class=middle><button class="btn success" id=open_${roomId} onclick='open_chat("${roomId}","${Location}")'>Open Chat</button></div><div class=bottom><button class="btn danger" id=exit_${roomId} onclick='exit_room("${Location}","${roomId}","${e}")'>Exit Room</button></div></div>`,s=`<div class=container><div class=top><input class=input id=change_name_${roomId} value=${name} style=display:none><button class="btn dark" id=save_${roomId} style=display:none onclick='save_edited_room_name("${roomId}")'>Save Changes</button><p id=${roomId}_p class=p style=display:unset>${name}</p></div><div class=middle><button class="btn success" id=open_${roomId} onclick='open_chat("${roomId}","${Location}")'>Open Chat</button><label for=admin style=display:none id=admin_label_${roomId}>Admin <input type=radio name=role id=admin_radio_${roomId} value=admin></label><label for=regular style=display:none id=regular_label_${roomId}>Regular <input type=radio name=role id=regular_radio_${roomId} value=regular></label><input type=email class=input id=add_user_input_${roomId} placeholder="Enter The Email" style=display:none><button class="btn primary" id=add_user_${roomId} onclick='add_user("${Location}","${roomId}")' style=display:none>Add User</button></div><div class=bottom><button class="btn primary" id=show_add_user_${roomId} onclick='show_add_user_settings("${roomId}")'>Add User</button><button class="btn warning" onclick='show_edit_group_name_settings("${roomId}")'>Edit Group Name</button><button class="btn danger" id=delete_${roomId} onclick='delete_room("${Location}","${roomId}")'>Delete Room</button></div></div>`,d=`<div class=container><div class=top><p id=${roomId}_p class=p style=display:unset>${name}</p></div><div class=middle><button class="btn success" id=open_${roomId} onclick='open_chat("${roomId}","${Location}")'>Open Chat</button></div><div class=bottom><button class="btn danger" id=delete_${roomId} onclick='delete_room("${Location}","${roomId}")'>Delete Room</button></div></div>`;function o(){var t;"admin"==role&&Location!=e?t=n:"regular"==role&&Location!=e?t=l:"admin"==role&&Location==e?t=s:"regular"==role&&Location==e?t=d:doNoting(),document.getElementById("output").innerHTML+=t}o()})})}function show_edit_group_name_settings(e){document.getElementById(`change_name_${e}`).style.display="unset",document.getElementById(`save_${e}`).style.display="unset",document.getElementById(`${e}_p`).style.display="none"}function save_edited_room_name(e){var t;t=document.getElementById(`change_name_${e}`).value,rooms.database().ref(`/${Location}`).child(`/${e}`).update({name:t}),t="",getData()}function show_add_user_settings(e){document.getElementById(`add_user_input_${e}`).style.display="unset",document.getElementById(`add_user_${e}`).style.display="unset",document.getElementById(`admin_label_${e}`).style.display="unset",document.getElementById(`admin_radio_${e}`).style.display="unset",document.getElementById(`regular_label_${e}`).style.display="unset",document.getElementById(`regular_radio_${e}`).style.display="unset",document.getElementById(`show_add_user_${e}`).style.display="none"}function add_user(e,t){var a=document.getElementsByName("role");for(i=0;i<a.length;i++)a[i].checked&&(role=a[i].value,new_user=(new_user=document.getElementById(`add_user_input_${t}`).value).replaceAll(".","ā").replaceAll("#","ḥ").replaceAll("$","ḍ").replaceAll("[","ś").replaceAll("]","ē").replaceAll(" ","\xe6"),rooms.database().ref(`${e}/${t}/users`).child(`${new_user}`).update({role:role}),rooms.database().ref(`/${new_user}`).child(`${t}`).update({location:e}));getData()}function exit_room(e,t,a){rooms.database().ref(`/${e}/${t}/users`).child(`${a}`).remove(),rooms.database().ref(`/${a}`).child(`${t}`).remove()}function delete_room(e,t){let a=localStorage.getItem("username");rooms.database().ref(`/${e}/${t}/users`).on("value",function(e){var n=e.val(),l=Object.keys(n).map(e=>[Number(e),n[e]]),s=Object.entries(n);for(let d=0;d<l.length;d++)a=(getUsername=s[0])[0],rooms.database().ref(`/${a}`).child(`${t}`).remove()}),rooms.database().ref(`/${e}/${t}/users`).child(`${a}`).remove(),getData()}function open_chat(e,t){localStorage.setItem("roomId",e),localStorage.setItem("Location",t),window.location="/chat/chat/"}redirect(),getData();