function redirect(){roomId=localStorage.getItem("roomId"),Location=localStorage.getItem("Location"),void 0==roomId&&(window.location="/chat/")}function getData(){document.getElementById("container").innerHTML="",chats.database().ref(`/${Location}/${roomId}`).on("value",function(e){var t,a=e.val(),l=Object.keys(a).map(e=>[Number(e),a[e]]),n=Object.entries(a);for(let s=0;s<l.length;s++)chatId=(getChatId=n[s])[0],date=(main=(data=l[s])[1]).date,message=main.message,name=main.name,time=main.time,(sendersUsername=main.username)==username?t=`<div class=right><p class=p>${message}</p><small class=small id=small_${username}>${name} | ${date} | ${time} <button class="sub-btn danger" onclick='delete_message("${chatId}")'>&times;</button></small></div>`:sendersUsername!=username?t=`<div class=left><p class=p>${message}</p><small class=small id=small_${username}>${name} | ${date} | ${time}</small></div>`:doNoting(),document.getElementById("container").innerHTML+=t})}function send(){let e=localStorage.getItem("name");message=document.getElementById("message_input").value,date=(getDate=new Date).getDate(),(chatId=username+(fullDate=date+"-"+(month=getDate.getMonth()+1)+"-"+(year=getDate.getFullYear()))+(time=getDate.toLocaleTimeString())).toString,chatId=chatId.replaceAll(" ","á¹‡"),chats.database().ref(`/${Location}/${roomId}`).child(chatId).update({date:fullDate,message:message,name:e,time:time,username:username}),getData(),message=document.getElementById("message_input").value=""}function delete_message(e){chats.database().ref(`/${Location}/${roomId}`).child(`${e}`).remove(),getData()}redirect(),Location=localStorage.getItem("Location"),roomId=localStorage.getItem("roomId"),username=localStorage.getItem("username"),getData();